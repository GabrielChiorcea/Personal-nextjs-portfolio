<!DOCTYPE html><html lang="en" class="bg-dark text-white"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"/><title>Backend</title><meta http-equiv="X-UA-Compatible" content="ie=edge"/><meta name="keyword" content="react, nextjs, next.js, c#, python, javascript, typescript, web development, software development, programming, coding, tech, technology, blog, portfolio, gabriel chiorcea"/><meta name="author" content=""/><meta name="description" content="Flask-based backend application providing user authentication and profile management functionalities."/><meta property="og:title" content="Backend"/><meta property="og:description" content="Flask-based backend application providing user authentication and profile management functionalities."/><meta property="og:image" content="/images/project/04.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta name="twitter:title" content="Backend"/><meta name="twitter:image" content="/images/project/04.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:description" content="Flask-based backend application providing user authentication and profile management functionalities."/><link rel="shortcut icon" href="/images/favicon.svg" type="image/x-icon"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/media/07a54048a9278940-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/4bd742deaa420749-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/37385d46332059d1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/37385d46332059d1.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0f519403d706eda6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0f519403d706eda6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js" defer=""></script><script src="/_next/static/chunks/framework-305cb810cde7afac.js" defer=""></script><script src="/_next/static/chunks/main-b3bd43ad1aa985bd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-97ddcba4b9b4d89b.js" defer=""></script><script src="/_next/static/chunks/675-a58c45fe9fb28c27.js" defer=""></script><script src="/_next/static/chunks/593-34a8a7e326dae523.js" defer=""></script><script src="/_next/static/chunks/81-efbc1fe6eb0ef47b.js" defer=""></script><script src="/_next/static/chunks/pages/project/%5Bslug%5D-20228e2cf7d75172.js" defer=""></script><script src="/_next/static/MkfsAwpbqUWHL8Ilrxv7U/_buildManifest.js" defer=""></script><script src="/_next/static/MkfsAwpbqUWHL8Ilrxv7U/_ssgManifest.js" defer=""></script></head><body><div id="__next"><section class="__variable_53b90d __variable_817ffb font-primary"><header class="fixed top-0 z-[9000] w-full Header_header__bNjej  "><div class="container"><div class="flex justify-between py-6 items-center relative"><div class="w-1/4 transition-all duration-300 "><a class="inline-block align-middle" href="/"></a></div><nav class="Header_navbar__jBQHm w-12 !h-12 lg:w-auto lg:!h-auto " style="height:auto"><a class="" href="/">Home</a><a class="" href="/about/">About</a><a class="active !text-white/100" href="/project/">Project</a><a class="" href="/blog/">Blog</a><a class="" href="/contact/">Contact</a></nav><div class="Header_navOverlay__NqTwP "></div><button type="button" aria-label="Toggle Mobile Navigation" class="Header_navToggler__qhze5  "><svg class="" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 8l16 0"></path><path d="M4 16l16 0"></path></svg><svg class="-rotate-180 translate-x-[3rem]" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M18 6l-12 12"></path><path d="M6 6l12 12"></path></svg></button><div class="w-1/4 transition-all duration-300 text-right text-sm hidden lg:block "><span class="block text-white/75 mb-1">Social Links:</span><ul class="inline-flex gap-x-4"><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="https://www.linkedin.com/in/gabriel-chiorcea/" class="link">LIN</a></li><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="https://github.com/GabrielChiorcea" class="link">GITHUB</a></li></ul></div></div></div></header><main class="bg-dark relative z-10 pt-[92px] lg:pt-[106px] min-h-[82vh] "><section class="pt-2 pb-28"><div class="container"><div class="row justify-center banner"><div class="md:col-7 lg:col-6" data-aos="fade-up-sm"><span class="inline-block text-sm rounded-full bg-[#efefef] px-3 py-1 capitalize text-black mb-6">Backend</span><div class="flex items-center  gap-4 mb-6"><h1 class="text-4xl md:text-5xl mb-4 !leading-tight">Backend</h1><div class="py-3"><a href="https://backend.gabrielchiorcea.tech/" target="_blank"><button class="px-6 py-3 rounded-full text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-300">Acces live</button></a></div></div><p><em>Flask-based backend application providing user authentication and profile management functionalities.</em></p><ul class="row text-white mt-4"><li class="col-6 mt-8"><p class="text-white/50 text-xs uppercase tracking-wider mb-2">Client</p><div class="[&amp;_a]:underline [&amp;_a]:hover:no-underline [&amp;_li]:mt-1"><p>World wide</p></div></li><li class="col-6 mt-8"><p class="text-white/50 text-xs uppercase tracking-wider mb-2">Timeline</p><div class="[&amp;_a]:underline [&amp;_a]:hover:no-underline [&amp;_li]:mt-1"><p>In progress, but ready for tests</p></div></li><li class="col-6 mt-8"><p class="text-white/50 text-xs uppercase tracking-wider mb-2">Tehnology</p><div class="[&amp;_a]:underline [&amp;_a]:hover:no-underline [&amp;_li]:mt-1"><ul>
<li>Python</li>
<li>PyJWT</li>
<li>Sqlalchemy/MySQL</li>
<li>Werkzeug</li>
</ul></div></li><li class="col-6 mt-8"><p class="text-white/50 text-xs uppercase tracking-wider mb-2">Functions</p><div class="[&amp;_a]:underline [&amp;_a]:hover:no-underline [&amp;_li]:mt-1"><ul>
<li>User Authentication</li>
<li>Profile Management</li>
<li>Account Management</li>
</ul></div></li></ul></div><div class="md:col-5 lg:col-4 mt-12 md:mt-0" data-aos="fade-up-sm" data-aos-delay="100"><img alt="Backend" loading="lazy" width="500" height="500" decoding="async" data-nimg="1" class="aspect-square object-cover object-center rounded-lg bg-light/20 w-full md:w-[500px]" style="color:transparent" src="/images/project/04.jpg"/></div><div class="lg:col-10"><hr class="opacity-5 mt-28 mb-24"/></div></div><div class="row justify-center" data-aos="fade-in"><div class="lg:col-10"><article class="content content-light [&amp;_img]:w-full"><h2>Description</h2>
<p>This backend is a Flask-based web application that provides user authentication and profile management functionalities. It is designed to handle user sign-up, login, profile updates, and account management. The backend interacts with a MySQL database using SQLAlchemy for ORM (Object-Relational Mapping).
This backend leverages a combination of Flask, SQLAlchemy, PyJWT, MySQL, and Werkzeug to provide a robust and secure user authentication and profile management system. Flask serves as the web framework, SQLAlchemy handles database interactions, PyJWT manages token-based authentication, MySQL stores user data, and Werkzeug provides essential utilities for web application development. This technology stack ensures efficient and secure handling of user data and authentication processes.</p>
<h2>PyJWT Usage in This Backend</h2>
<h4>How PyJWT is Used in This Backend:</h4>
<ol>
<li>Token Generation:
When a user logs in, a JWT is generated using the create_access_token function. This token includes the user&#x27;s ID and an expiration time. The token is then sent in the database, to the client we give a code related to the token, which stores it and includes it in the Authorization header of subsequent requests.</li>
</ol>















<table><thead><tr><th>id</th><th>session_string</th><th>jwt</th></tr></thead><tbody><tr><td>44</td><td>8PBV22S</td><td>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6Z...</td></tr></tbody></table>
<p>As can be seen, nothing relate to the id of the user, the id is inside of jwt and need special decode for extract the ID.</p>
<ol start="2">
<li>
<p>Token Verification:
For protected routes, the backend verifies the JWT included in the Authorization header of incoming requests. The token is decoded using the jwt.decode function, which extracts the user&#x27;s ID and other claims. If the token is valid, the request is processed; otherwise, an error response is returned.</p>
</li>
<li>
<p>Session Management:
The backend uses JWTs to manage user sessions. When a user logs in, a session is created with the generated token. This session is used to authenticate the user for subsequent requests.</p>
</li>
</ol>
<h2>Key Features:</h2>
<h3>User Authentication:</h3>
<p>Sign-Up: Allows users to create an account by providing an email and password. This is keeped it simple.</p>
<pre><code class="language-python">@main.route(&#x27;/creare-cont&#x27; , methods=[&#x27;POST&#x27;])
def insert_data():
    data = request.get_json()
    email = data.get(&#x27;email&#x27;)
    password = data.get(&#x27;password&#x27;)
    firstName = data.get(&#x27;firstName&#x27;)
    lastName = data.get(&#x27;lastName&#x27;)
    userName = data.get(&#x27;username&#x27;)

    try: 
        has = HashPass.passwordHash(password) 
        new_user = User( userName, email, lastName, firstName , has)
        db.session.add(new_user)
        db.session.commit()
        return jsonify({&#x27;message&#x27;: &quot;The user account is create with succes&quot;}), 201
    except SQLAlchemyError as e:
        db.session.rollback()
        return jsonify({&#x27;error&#x27;: str(e)}), 500
</code></pre>
<h3>User Authentication:</h3>
<p>About HashPass.passwordHash(password) is a special medotdh I create to hash the password, validate email format and checking for missing fields are done in the FrontEnd, checking for existing email and username
I have a separated function that is used in FrontEnd when input is out of focus, the function is call via API.</p>
<p>Login: Users can log in using their email and password. A JWT (JSON Web Token) is generated for authenticated sessions. Dummy profile and social link data are created for new users.</p>
<pre><code class="language-python">        if user:
            access_token = create_access_token(identity=check_user.id, expires_delta=datetime.timedelta(days=1))    
            insert_session = Session(add_session_string, access_token)
            dummy_profile = ProfileCard(
                occupation=&quot;May I ask you what do you do?&quot;,
                homeaddress=&quot;How far are you ?&quot;,
                country=&quot;I guess you are from Nice ?&quot;,
                county=&quot;France ?&quot;,
                user_id=check_user.id,
                image=b&quot;&quot;  
            )
            dummy_social_links = SocialLinks(
                linkedin=&quot;https://linkedin.com/&quot;,
                facebook=&quot;https://facebook.com/&quot;,
                github=&quot;https://github.com/&quot;,
                instagram=&quot;https://instagram.com/&quot;,
                twitter=&quot;https://twitter.com/&quot;,
                youtube=&quot;https://youtube.com/&quot;,
                description=&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;,
                user_id=check_user.id
            )            

            db.session.add(insert_session)
            db.session.commit()

            db.session.add(dummy_profile)
            db.session.commit()

            db.session.add(dummy_social_links)
            db.session.commit()
            return jsonify({&#x27;message&#x27;: add_session_string}), 200
        else:   
            return jsonify({&#x27;message&#x27;: &#x27;Password or user are incorrect&#x27;}), 202
</code></pre>
<h3>Profile Management:</h3>
<p>Set Contact Details: Allows users to update their contact details, including occupation, home address, country, county, and profile image.</p>
<p>Set Social Links: Allows users to update their social links, such as LinkedIn, Facebook, GitHub, Instagram, Twitter, and YouTube.</p>
<pre><code class="language-python"># Retrieve the existing social links
            social_links = SocialLinks.query.filter_by(user_id=user_id).first()

            if social_links:
                # Update the existing social links with new data
                social_links.linkedin = data.get(&quot;linkedIn&quot;, social_links.linkedin)
                social_links.facebook = data.get(&quot;faceBook&quot;, social_links.facebook)                
                social_links.github = data.get(&quot;gitHub&quot;, social_links.github)            
                social_links.instagram = data.get(&quot;instagram&quot;, social_links.instagram)            
                social_links.twitter = data.get(&quot;twitter&quot;, social_links.twitter)                
                social_links.youtube = data.get(&quot;youtube&quot;, social_links.youtube)
                social_links.description = data.get(&quot;description&quot;, social_links.description)
</code></pre>
<p>I use this approach because this is an update.</p>
<p>Get Profile: Retrieves the user&#x27;s profile information, including occupation, home address, country, county, and social links.</p>
<pre><code class="language-python">    try:
        decoded_token = jwt.decode(ses.jwt, secret_key, algorithms=[&quot;xxxxx&quot;])
        user_id = decoded_token.get(&#x27;sub&#x27;)  # Extract user ID from &#x27;sub&#x27; key
    except jwt.DecodeError as e:
        return jsonify({&#x27;error&#x27;: &#x27;Invalid token format&#x27;, &#x27;message&#x27;: str(e)}), 400
    except jwt.ExpiredSignatureError:
        return jsonify({&#x27;error&#x27;: &#x27;Token has expired&#x27;}), 401
    except jwt.InvalidTokenError as e:
        return jsonify({&#x27;error&#x27;: &#x27;Invalid token&#x27;, &#x27;message&#x27;: str(e)}), 401



        `````````````````````````````````````````````````````````````````````````````````````

         profile = ProfileCard.query.filter_by(user_id=user_id).first()
    social_links = SocialLinks.query.filter_by(user_id=user_id).first()
    user = User.query.filter_by(id=user_id).first()
    if not profile:
        return jsonify({&#x27;error&#x27;: &#x27;Profile or user not found&#x27;}), 404
    image_base64 = base64.b64encode(profile.image).decode(&#x27;utf-8&#x27;)
    return jsonify({
        &#x27;HomeAddress&#x27;: profile.homeaddress,
        &#x27;Country&#x27;: profile.country,
        &#x27;County&#x27;: profile.county,
        &#x27;Occupation&#x27;: profile.occupation,
        &#x27;Image&#x27;: image_base64,  # Assuming image is stored as binary data
        &#x27;FullName&#x27;: &#x27; &#x27;.join([user.first_name, user.last_name]),
        &#x27;Email&#x27;: user.email,
        &#x27;LinkedIn&#x27;: social_links.linkedin,
        &#x27;FaceBook&#x27;: social_links.facebook,
        &#x27;GitHub&#x27;: social_links.github,
        &#x27;Instagram&#x27;: social_links.instagram,
        &#x27;Twitter&#x27;: social_links.twitter,
        &#x27;Youtube&#x27;: social_links.youtube,
        &#x27;Description&#x27;: social_links.description

    }), 200
</code></pre>
<h3>Account Management:</h3>
<p>Everything start with chinkd the jwt:</p>
<pre><code class="language-python">ses = Session.query.filter_by(session_string=token).first()
decoded_token = jwt.decode(ses.jwt, secret_key, algorithms=[&quot;#####&quot;])
</code></pre>
<p>Change Password: Allows users to change their password by providing the current password and a new password.</p>
<pre><code class="language-python"> # Verify the current password
        if not HashPass.check_password(user.password, current_password):
            return jsonify({&#x27;message&#x27;: &#x27;Current password is incorrect&#x27;}), 400

        # Update the password
        user.password = HashPass.passwordHash(new_password)
        db.session.commit()
</code></pre>
<p>Change Email: Allows users to update their email address.</p>
<pre><code class="language-python"> user = User.query.filter_by(id=user_id).first()
        if not user:
            return jsonify({&#x27;message&#x27;: &#x27;User not found&#x27;}), 404

        # Update the email
        user.email = new_email
        db.session.commit()
</code></pre>
<p>Change Username: Allows users to update their username, ensuring the new username is not already taken.</p>
<pre><code class="language-python">existing_user = User.query.filter_by(username=new_username).first()
        if existing_user:
            return jsonify({&#x27;message&#x27;: &#x27;Username already taken&#x27;}), 400

        # Update the username
        user.username = new_username
        db.session.commit()
</code></pre>
<p>Delete Account: Allows users to delete their account and all related data, including profile and social links.</p>
<pre><code class="language-python">ser = User.query.filter_by(id=user_id).first()
        if not user:
            return jsonify({&#x27;message&#x27;: &#x27;User not found&#x27;}), 404

        # Delete related records
        ProfileCard.query.filter_by(user_id=user_id).delete()
        SocialLinks.query.filter_by(user_id=user_id).delete()

        # Delete the user record
        db.session.delete(user)
        db.session.commit()
</code></pre>
<p>Technologies Used:
Flask: A lightweight WSGI web application framework in Python.
SQLAlchemy: An ORM library for managing database interactions.
PyJWT: A Python library for working with JSON Web Tokens.
MySQL: A relational database management system for storing user data.
Werkzeug: A comprehensive WSGI web application library used for password hashing and security.</p>
<p>Example Endpoints:</p>
<ol>
<li>POST /intra-in-cont: Sign up a new user.</li>
<li>POST /login: Log in an existing user.</li>
<li>GET /getProfile: Retrieve the user&#x27;s profile information.</li>
<li>POST /setContactDetail: Update the user&#x27;s contact details.</li>
<li>POST /setSocialLink: Update the user&#x27;s social links.</li>
<li>POST /changePassword: Change the user&#x27;s password.</li>
<li>POST /changeEmail: Change the user&#x27;s email address.</li>
<li>POST /changeUsername: Change the user&#x27;s username.</li>
<li>DELETE /deleteAccount: Delete the user&#x27;s account and all related data.</li>
</ol>
<p>This backend provides a robust foundation for user authentication and profile management, ensuring secure and efficient handling of user data.</p>
<p>This description provides a comprehensive overview of the backend&#x27;s functionality, key features, and technologies used. Adjust the details as needed to match your specific implementation.</p></article></div></div></div></section><section class="py-28 bg-white text-dark rounded-b-2xl overflow-hidden"><div class="container"><div class="mb-16"><h2 class="text-4xl md:text-5xl font-secondary font-medium -mt-[6px] text-center">Next Project</h2></div><div class="row justify-center"><div class="lg:col-6"><div data-aos="true" class=" rounded-lg overflow-hidden relative group h-full" style="background-color:#ffffff"><span class="absolute h-full group-[.aos-animate]:h-0 w-full z-30 duration-700 left-0 bottom-0" style="background-color:#BE0000;transition-delay:0ms"></span><img alt="Database" loading="lazy" width="620" height="420" decoding="async" data-nimg="1" class="scale-150 group-[.aos-animate]:scale-100 duration-700 group-hover:!scale-125 object-contain w-full h-full has-twoColumns" style="color:transparent;height:376px" src="/images/project/06.jpg"/><div class="absolute inset-0 z-20 flex justify-center flex-col p-8"><span class="absolute h-full w-full duration-300 left-0 bottom-0 opacity-0 bg-overlay group-hover:opacity-100 -z-10 pointer-events-none"></span><div class="flex items-center justify-between opacity-0 -mt-1 group-hover:opacity-100 group-hover:mt-0 duration-300 group-hover:delay-300"><span class="uppercase text-white bg-white/25 text-sm font-light tracking-wider px-3 py-1 rounded-full backdrop-blur-lg">Server</span><a class="stretched-link" href="/project/server/"><img alt="arrow" loading="lazy" width="25" height="22" decoding="async" data-nimg="1" class="inline-block rotate-[135deg]" style="color:transparent" src="/images/arrow-right.svg"/></a></div><div class="text-center mt-auto"><h3 class="text-4xl font-secondary font-semibold text-white mb-2 relative overflow-hidden"><span class="block translate-y-full group-hover:translate-y-0 duration-300">Database</span></h3><p class="text-white font-light relative overflow-hidden"><span class="block translate-y-full group-hover:translate-y-0 duration-300 group-hover:delay-150">A server configurate to have multiple sql server</span></p></div></div></div></div></div></div></section></main><footer class="pt-28 pb-20 sticky bottom-0 z-[1]"><div class="mb-16 overflow-hidden"><a class="Footer_footer-cta__jiHcZ block text-5xl font-secondary font-medium mb-8" href="/contact/"><div class="Footer_animated-line__iHYSv Footer_animated-line-one__a6fkz mb-5"><div class="Footer_line-block__ri2R2"><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span></div><div class="Footer_line-block-copy__T8Dk5"><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span></div></div><div class="Footer_animated-line__iHYSv Footer_animated-line-two__3ei2E"><div class="Footer_line-block__ri2R2"><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span></div><div class="Footer_line-block-copy__T8Dk5"><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span><span class="mr-24"><span class="Footer_cta-text__4dzFD">Let’s get in touch</span><img alt="arrow-right" loading="lazy" width="39" height="31" decoding="async" data-nimg="1" class="inline-block ml-16 Footer_cta-icon__a3mwY" style="color:transparent" src="/images/arrow-right.svg"/></span></div></div></a></div><div class="container"><div class="row"><div class="md:col-6 text-center md:text-left mb-4"><ul class="inline-flex flex-wrap justify-center md:justify-start gap-x-6"><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="https://www.linkedin.com/in/gabriel-chiorcea/" class="link">Linkedin</a></li><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="https://github.com/GabrielChiorcea" class="link">Github</a></li></ul></div><div class="md:col-6 text-center md:text-right mb-4"><ul class="inline-flex flex-wrap justify-center md:justify-end gap-x-6"><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="" class="link"></a></li><li class="inline-block hover:opacity-75 transition-op duration-300"><a href="" class="link"></a></li></ul></div><div class="md:col-6 text-center md:text-left mb-4 md:mb-0"><p class="text-white/75"></p></div><div class="md:col-6 text-center md:text-right"></div></div></div></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"currentProject":{"slug":"backend","frontMatter":{"date":"2013-10-10","title":"Backend","lang":"Build with Python","description":"Flask-based backend application providing user authentication and profile management functionalities.","image":"/images/project/04.jpg","color":"#307B93","category":"Backend","projectInfo":[{"title":"Client","data":"World wide"},{"title":"Timeline","data":"In progress, but ready for tests"},{"title":"Tehnology","data":"- Python\n- PyJWT\n- Sqlalchemy/MySQL\n- Werkzeug\n"},{"title":"Functions","data":"- User Authentication\n- Profile Management\n- Account Management \n"}],"live":[{"link":"https://backend.gabrielchiorcea.tech/"}]},"content":"\r\n## Description\r\n\r\nThis backend is a Flask-based web application that provides user authentication and profile management functionalities. It is designed to handle user sign-up, login, profile updates, and account management. The backend interacts with a MySQL database using SQLAlchemy for ORM (Object-Relational Mapping).\r\nThis backend leverages a combination of Flask, SQLAlchemy, PyJWT, MySQL, and Werkzeug to provide a robust and secure user authentication and profile management system. Flask serves as the web framework, SQLAlchemy handles database interactions, PyJWT manages token-based authentication, MySQL stores user data, and Werkzeug provides essential utilities for web application development. This technology stack ensures efficient and secure handling of user data and authentication processes.\r\n\r\n\r\n## PyJWT Usage in This Backend\r\n\r\n#### How PyJWT is Used in This Backend:\r\n\r\n1. Token Generation:\r\nWhen a user logs in, a JWT is generated using the create_access_token function. This token includes the user's ID and an expiration time. The token is then sent in the database, to the client we give a code related to the token, which stores it and includes it in the Authorization header of subsequent requests.\r\n\r\n| id \t| session_string \t| jwt                                                   \t|\r\n|----\t|----------------\t|-------------------------------------------------------\t|\r\n| 44 \t| 8PBV22S        \t| eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6Z... \t|\r\n\r\nAs can be seen, nothing relate to the id of the user, the id is inside of jwt and need special decode for extract the ID.\r\n\r\n2. Token Verification:\r\nFor protected routes, the backend verifies the JWT included in the Authorization header of incoming requests. The token is decoded using the jwt.decode function, which extracts the user's ID and other claims. If the token is valid, the request is processed; otherwise, an error response is returned.\r\n\r\n3. Session Management:\r\nThe backend uses JWTs to manage user sessions. When a user logs in, a session is created with the generated token. This session is used to authenticate the user for subsequent requests.\r\n\r\n## Key Features: \r\n### User Authentication:\r\n\r\nSign-Up: Allows users to create an account by providing an email and password. This is keeped it simple.\r\n\r\n```python\r\n@main.route('/creare-cont' , methods=['POST'])\r\ndef insert_data():\r\n    data = request.get_json()\r\n    email = data.get('email')\r\n    password = data.get('password')\r\n    firstName = data.get('firstName')\r\n    lastName = data.get('lastName')\r\n    userName = data.get('username')\r\n\r\n    try: \r\n        has = HashPass.passwordHash(password) \r\n        new_user = User( userName, email, lastName, firstName , has)\r\n        db.session.add(new_user)\r\n        db.session.commit()\r\n        return jsonify({'message': \"The user account is create with succes\"}), 201\r\n    except SQLAlchemyError as e:\r\n        db.session.rollback()\r\n        return jsonify({'error': str(e)}), 500\r\n```\r\n### User Authentication:\r\n\r\nAbout HashPass.passwordHash(password) is a special medotdh I create to hash the password, validate email format and checking for missing fields are done in the FrontEnd, checking for existing email and username \r\nI have a separated function that is used in FrontEnd when input is out of focus, the function is call via API. \r\n\r\nLogin: Users can log in using their email and password. A JWT (JSON Web Token) is generated for authenticated sessions. Dummy profile and social link data are created for new users.\r\n\r\n```python\r\n        if user:\r\n            access_token = create_access_token(identity=check_user.id, expires_delta=datetime.timedelta(days=1))    \r\n            insert_session = Session(add_session_string, access_token)\r\n            dummy_profile = ProfileCard(\r\n                occupation=\"May I ask you what do you do?\",\r\n                homeaddress=\"How far are you ?\",\r\n                country=\"I guess you are from Nice ?\",\r\n                county=\"France ?\",\r\n                user_id=check_user.id,\r\n                image=b\"\"  \r\n            )\r\n            dummy_social_links = SocialLinks(\r\n                linkedin=\"https://linkedin.com/\",\r\n                facebook=\"https://facebook.com/\",\r\n                github=\"https://github.com/\",\r\n                instagram=\"https://instagram.com/\",\r\n                twitter=\"https://twitter.com/\",\r\n                youtube=\"https://youtube.com/\",\r\n                description=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\",\r\n                user_id=check_user.id\r\n            )            \r\n\r\n            db.session.add(insert_session)\r\n            db.session.commit()\r\n\r\n            db.session.add(dummy_profile)\r\n            db.session.commit()\r\n\r\n            db.session.add(dummy_social_links)\r\n            db.session.commit()\r\n            return jsonify({'message': add_session_string}), 200\r\n        else:   \r\n            return jsonify({'message': 'Password or user are incorrect'}), 202\r\n```\r\n\r\n### Profile Management:\r\n\r\nSet Contact Details: Allows users to update their contact details, including occupation, home address, country, county, and profile image.\r\n\r\n\r\nSet Social Links: Allows users to update their social links, such as LinkedIn, Facebook, GitHub, Instagram, Twitter, and YouTube.\r\n\r\n```python\r\n# Retrieve the existing social links\r\n            social_links = SocialLinks.query.filter_by(user_id=user_id).first()\r\n\r\n            if social_links:\r\n                # Update the existing social links with new data\r\n                social_links.linkedin = data.get(\"linkedIn\", social_links.linkedin)\r\n                social_links.facebook = data.get(\"faceBook\", social_links.facebook)                \r\n                social_links.github = data.get(\"gitHub\", social_links.github)            \r\n                social_links.instagram = data.get(\"instagram\", social_links.instagram)            \r\n                social_links.twitter = data.get(\"twitter\", social_links.twitter)                \r\n                social_links.youtube = data.get(\"youtube\", social_links.youtube)\r\n                social_links.description = data.get(\"description\", social_links.description)\r\n```\r\nI use this approach because this is an update.\r\n\r\n\r\nGet Profile: Retrieves the user's profile information, including occupation, home address, country, county, and social links.\r\n\r\n```python\r\n    try:\r\n        decoded_token = jwt.decode(ses.jwt, secret_key, algorithms=[\"xxxxx\"])\r\n        user_id = decoded_token.get('sub')  # Extract user ID from 'sub' key\r\n    except jwt.DecodeError as e:\r\n        return jsonify({'error': 'Invalid token format', 'message': str(e)}), 400\r\n    except jwt.ExpiredSignatureError:\r\n        return jsonify({'error': 'Token has expired'}), 401\r\n    except jwt.InvalidTokenError as e:\r\n        return jsonify({'error': 'Invalid token', 'message': str(e)}), 401\r\n\r\n\r\n\r\n        `````````````````````````````````````````````````````````````````````````````````````\r\n\r\n         profile = ProfileCard.query.filter_by(user_id=user_id).first()\r\n    social_links = SocialLinks.query.filter_by(user_id=user_id).first()\r\n    user = User.query.filter_by(id=user_id).first()\r\n    if not profile:\r\n        return jsonify({'error': 'Profile or user not found'}), 404\r\n    image_base64 = base64.b64encode(profile.image).decode('utf-8')\r\n    return jsonify({\r\n        'HomeAddress': profile.homeaddress,\r\n        'Country': profile.country,\r\n        'County': profile.county,\r\n        'Occupation': profile.occupation,\r\n        'Image': image_base64,  # Assuming image is stored as binary data\r\n        'FullName': ' '.join([user.first_name, user.last_name]),\r\n        'Email': user.email,\r\n        'LinkedIn': social_links.linkedin,\r\n        'FaceBook': social_links.facebook,\r\n        'GitHub': social_links.github,\r\n        'Instagram': social_links.instagram,\r\n        'Twitter': social_links.twitter,\r\n        'Youtube': social_links.youtube,\r\n        'Description': social_links.description\r\n\r\n    }), 200\r\n```\r\n\r\n### Account Management:\r\n\r\nEverything start with chinkd the jwt:\r\n\r\n```python\r\nses = Session.query.filter_by(session_string=token).first()\r\ndecoded_token = jwt.decode(ses.jwt, secret_key, algorithms=[\"#####\"])\r\n```\r\n\r\nChange Password: Allows users to change their password by providing the current password and a new password.\r\n```python\r\n # Verify the current password\r\n        if not HashPass.check_password(user.password, current_password):\r\n            return jsonify({'message': 'Current password is incorrect'}), 400\r\n\r\n        # Update the password\r\n        user.password = HashPass.passwordHash(new_password)\r\n        db.session.commit()\r\n```\r\n\r\nChange Email: Allows users to update their email address.\r\n```python\r\n user = User.query.filter_by(id=user_id).first()\r\n        if not user:\r\n            return jsonify({'message': 'User not found'}), 404\r\n\r\n        # Update the email\r\n        user.email = new_email\r\n        db.session.commit()\r\n```\r\nChange Username: Allows users to update their username, ensuring the new username is not already taken.\r\n```python\r\nexisting_user = User.query.filter_by(username=new_username).first()\r\n        if existing_user:\r\n            return jsonify({'message': 'Username already taken'}), 400\r\n\r\n        # Update the username\r\n        user.username = new_username\r\n        db.session.commit()\r\n```\r\n\r\nDelete Account: Allows users to delete their account and all related data, including profile and social links.\r\n```python\r\nser = User.query.filter_by(id=user_id).first()\r\n        if not user:\r\n            return jsonify({'message': 'User not found'}), 404\r\n\r\n        # Delete related records\r\n        ProfileCard.query.filter_by(user_id=user_id).delete()\r\n        SocialLinks.query.filter_by(user_id=user_id).delete()\r\n\r\n        # Delete the user record\r\n        db.session.delete(user)\r\n        db.session.commit()\r\n```\r\n\r\nTechnologies Used:\r\nFlask: A lightweight WSGI web application framework in Python.\r\nSQLAlchemy: An ORM library for managing database interactions.\r\nPyJWT: A Python library for working with JSON Web Tokens.\r\nMySQL: A relational database management system for storing user data.\r\nWerkzeug: A comprehensive WSGI web application library used for password hashing and security.\r\n\r\nExample Endpoints:\r\n1.  POST /intra-in-cont: Sign up a new user.\r\n2.  POST /login: Log in an existing user.\r\n3.  GET /getProfile: Retrieve the user's profile information.\r\n4.  POST /setContactDetail: Update the user's contact details.\r\n6.  POST /setSocialLink: Update the user's social links.\r\n7.  POST /changePassword: Change the user's password.\r\n8.  POST /changeEmail: Change the user's email address.\r\n9.  POST /changeUsername: Change the user's username.\r\n10. DELETE /deleteAccount: Delete the user's account and all related data.\r\n\r\nThis backend provides a robust foundation for user authentication and profile management, ensuring secure and efficient handling of user data.\r\n\r\nThis description provides a comprehensive overview of the backend's functionality, key features, and technologies used. Adjust the details as needed to match your specific implementation.\r\n\r\n\r\n"},"nextProject":{"slug":"server","frontMatter":{"date":"2009-01-10","title":"Database","description":"A server configurate to have multiple sql server","image":"/images/project/06.jpg","color":"#BE0000","category":"Server","projectInfo":[{"title":"Client","data":"Word Wide"},{"title":"Timeline","data":"In progress"},{"title":"Tehnology","data":"- UFW firewall\n- Ubuntu 20\n- Jenkins\n- Docker\n- MySQL\n- Oracle\n- Microsoft\n"},{"title":"Functions","data":"- Database creation\n- User creation\n- Establish a remote connections\n- Open Database for dev\n"}],"live":[{"link":"#"}]},"content":"\r\n## Description:\r\nThis project focuses on configuring a server to host multiple SQL databases efficiently. It utilizes advanced technologies such as Ubuntu 20, UFW firewall for security, Jenkins for continuous integration, Docker for containerization, and support for diverse database systems including MySQL, Oracle, and Microsoft SQL Server. The primary functions include creating databases, managing user accounts, establishing secure remote connections, and making the databases accessible for development purposes. The project is currently in progress and serves a global client base, ensuring robust and scalable database management solutions tailored to diverse needs.\r\n\r\n\r\n"}},"__N_SSG":true},"page":"/project/[slug]","query":{"slug":"backend"},"buildId":"MkfsAwpbqUWHL8Ilrxv7U","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>